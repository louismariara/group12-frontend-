{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./MyCourses.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyCourses=()=>{const[courses,setCourses]=useState([]);const[error,setError]=useState(null);const[loading,setLoading]=useState(true);const user=JSON.parse(localStorage.getItem(\"user\"));useEffect(()=>{if(!user){setError(\"Please log in to view your courses.\");setLoading(false);return;}const token=localStorage.getItem(\"token\");const endpoint=user.is_instructor?\"http://localhost:5000/api/instructors/my-courses\":\"http://localhost:5000/api/students/my-courses\";fetch(endpoint,{headers:{\"Authorization\":`Bearer ${token}`}}).then(res=>{if(!res.ok)throw new Error(`HTTP error! Status: ${res.status}`);return res.json();}).then(data=>{if(Array.isArray(data)){setCourses(data);}else{setError(\"Unexpected response format from server\");console.error(\"Response is not an array:\",data);}setLoading(false);}).catch(err=>{setError(\"Failed to load courses: \"+err.message);setLoading(false);console.error(\"Fetch error:\",err);});},[]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading courses...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"my-courses-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:user.is_instructor?\"My Courses (Teaching)\":\"My Enrolled Courses\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"courses-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Course Name\"}),user.is_instructor&&/*#__PURE__*/_jsx(\"th\",{children:\"Students\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Published On\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:courses.map(course=>{var _course$students;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"course-info\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"course-info-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:course.image||\"/images/default.png\",alt:course.name,className:\"my-course-image\"}),/*#__PURE__*/_jsx(\"span\",{children:course.name})]})}),user.is_instructor&&/*#__PURE__*/_jsx(\"td\",{children:((_course$students=course.students)===null||_course$students===void 0?void 0:_course$students.length)||0}),/*#__PURE__*/_jsx(\"td\",{children:course.created_at?new Date(course.created_at).toLocaleDateString():\"N/A\"})]},course.id);})})]})]});};export default MyCourses;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","MyCourses","courses","setCourses","error","setError","loading","setLoading","user","JSON","parse","localStorage","getItem","token","endpoint","is_instructor","fetch","headers","then","res","ok","Error","status","json","data","Array","isArray","console","catch","err","message","children","className","map","course","_course$students","src","image","alt","name","students","length","created_at","Date","toLocaleDateString","id"],"sources":["/home/louis-mariara/Documents/phase5/group12-frontend-/src/Components/MyCourses/MyCourses.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./MyCourses.css\";\n\nconst MyCourses = () => {\n  const [courses, setCourses] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n\n  useEffect(() => {\n    if (!user) {\n      setError(\"Please log in to view your courses.\");\n      setLoading(false);\n      return;\n    }\n\n    const token = localStorage.getItem(\"token\");\n    const endpoint = user.is_instructor ? \n      \"http://localhost:5000/api/instructors/my-courses\" : \n      \"http://localhost:5000/api/students/my-courses\";\n\n    fetch(endpoint, {\n      headers: { \"Authorization\": `Bearer ${token}` }\n    })\n      .then(res => {\n        if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\n        return res.json();\n      })\n      .then(data => {\n        if (Array.isArray(data)) {\n          setCourses(data);\n        } else {\n          setError(\"Unexpected response format from server\");\n          console.error(\"Response is not an array:\", data);\n        }\n        setLoading(false);\n      })\n      .catch(err => {\n        setError(\"Failed to load courses: \" + err.message);\n        setLoading(false);\n        console.error(\"Fetch error:\", err);\n      });\n  }, []);\n\n  if (loading) return <div>Loading courses...</div>;\n  if (error) return <div>{error}</div>;\n\n  return (\n    <div className=\"my-courses-container\">\n      <h2>{user.is_instructor ? \"My Courses (Teaching)\" : \"My Enrolled Courses\"}</h2>\n      <table className=\"courses-table\">\n        <thead>\n          <tr>\n            <th>Course Name</th>\n            {user.is_instructor && <th>Students</th>}\n            <th>Published On</th>\n          </tr>\n        </thead>\n        <tbody>\n          {courses.map((course) => (\n            <tr key={course.id}>\n              <td className=\"course-info\">\n                <div className=\"course-info-wrapper\">\n                  <img\n                    src={course.image || \"/images/default.png\"}\n                    alt={course.name}\n                    className=\"my-course-image\"\n                  />\n                  <span>{course.name}</span>\n                </div>\n              </td>\n              {user.is_instructor && (\n                <td>{course.students?.length || 0}</td>\n              )}\n              <td>{course.created_at ? new Date(course.created_at).toLocaleDateString() : \"N/A\"}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default MyCourses;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}